<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator Enhancement Documentation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }

        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }

        .section h2 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 1.8em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .section h3 {
            color: #34495e;
            margin-top: 25px;
            font-size: 1.4em;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #e74c3c;
        }

        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .before,
        .after {
            padding: 20px;
            border-radius: 8px;
        }

        .before {
            background: #ffebee;
            border-left: 4px solid #f44336;
        }

        .after {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
        }

        .before h4,
        .after h4 {
            margin-top: 0;
            font-size: 1.1em;
        }

        .before h4 {
            color: #d32f2f;
        }

        .after h4 {
            color: #388e3c;
        }

        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }

        .algorithm-box {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
        }

        .example {
            background: #f3e5f5;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #9c27b0;
            margin: 15px 0;
        }

        .example h4 {
            margin-top: 0;
            color: #7b1fa2;
        }

        ul,
        ol {
            padding-left: 25px;
        }

        li {
            margin-bottom: 8px;
        }

        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 0.9em;
        }

        .toc {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .toc h3 {
            margin-top: 0;
            color: #2c3e50;
        }

        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }

        .toc li {
            margin-bottom: 5px;
        }

        .toc a {
            color: #3498db;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 3px;
            transition: background 0.3s;
        }

        .toc a:hover {
            background: #3498db;
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üßÆ Calculator Enhancement Documentation</h1>
            <p>Complete Guide to Multi-Operation Calculator with Mathematical Precedence</p>
        </div>

        <div class="content">
            <div class="toc">
                <h3>üìã Table of Contents</h3>
                <ul>
                    <li><a href="#overview">1. Project Overview</a></li>
                    <li><a href="#problem">2. Problem Analysis</a></li>
                    <li><a href="#changes">3. Detailed Changes Made</a></li>
                    <li><a href="#algorithms">4. Algorithms Implemented</a></li>
                    <li><a href="#examples">5. Usage Examples</a></li>
                    <li><a href="#technical">6. Technical Implementation</a></li>
                    <li><a href="#testing">7. Testing & Validation</a></li>
                </ul>
            </div>

            <div class="section" id="overview">
                <h2>üéØ Project Overview</h2>
                <p>This document provides a comprehensive analysis of the enhancements made to the Java Calculator
                    application. The original calculator was limited to single operations (e.g., 5 + 3 = 8), but has
                    been transformed into a sophisticated multi-operation calculator that respects mathematical
                    precedence rules.</p>

                <div class="highlight">
                    <strong>Key Achievement:</strong> The calculator now supports complex expressions like
                    <code>5 + 3 √ó 2 - 1</code> and correctly evaluates them as <code>10</code> (not <code>19</code>),
                    following proper mathematical order of operations (PEMDAS/BODMAS).
                </div>
            </div>

            <div class="section" id="problem">
                <h2>üîç Problem Analysis</h2>

                <h3>Original Limitations</h3>
                <div class="before-after">
                    <div class="before">
                        <h4>‚ùå Before Enhancement</h4>
                        <ul>
                            <li>Only supported single operations</li>
                            <li>No expression building capability</li>
                            <li>Left-to-right evaluation (incorrect)</li>
                            <li>Limited to: operand1 + operator + operand2</li>
                            <li>Example: 5 + 3 √ó 2 = 16 (wrong!)</li>
                        </ul>
                    </div>
                    <div class="after">
                        <h4>‚úÖ After Enhancement</h4>
                        <ul>
                            <li>Supports multiple operations</li>
                            <li>Expression building with display</li>
                            <li>Proper mathematical precedence</li>
                            <li>Complex expressions supported</li>
                            <li>Example: 5 + 3 √ó 2 = 11 (correct!)</li>
                        </ul>
                    </div>
                </div>

                <h3>Mathematical Precedence Issues</h3>
                <p>The original implementation evaluated expressions from left to right, ignoring mathematical rules:
                </p>

                <div class="example">
                    <h4>Example: 5 + 3 √ó 2</h4>
                    <p><strong>Wrong (Original):</strong> (5 + 3) √ó 2 = 8 √ó 2 = 16</p>
                    <p><strong>Correct (Enhanced):</strong> 5 + (3 √ó 2) = 5 + 6 = 11</p>
                </div>
            </div>

            <div class="section" id="changes">
                <h2>üîß Detailed Changes Made</h2>

                <h3>1. Variable System Overhaul</h3>
                <div class="before-after">
                    <div class="before">
                        <h4>‚ùå Original Variables</h4>
                        <div class="code-block">
                            private double firstOperand = 0;
                            private String operator = "";
                            double result = 0;
                        </div>
                        <p><strong>Problems:</strong></p>
                        <ul>
                            <li>Only stored one operation</li>
                            <li>Limited to two operands</li>
                            <li>No expression history</li>
                        </ul>
                    </div>
                    <div class="after">
                        <h4>‚úÖ Enhanced Variables</h4>
                        <div class="code-block">
                            private StringBuilder expression = new StringBuilder();
                            private boolean isNewNumber = true;
                            private double result = 0;
                        </div>
                        <p><strong>Benefits:</strong></p>
                        <ul>
                            <li>Stores complete expressions</li>
                            <li>Supports unlimited operations</li>
                            <li>Tracks number input state</li>
                        </ul>
                    </div>
                </div>

                <h3>2. Operator Button Handlers</h3>
                <p>Completely rewrote all operator button handlers to build expressions instead of performing immediate
                    calculations.</p>

                <div class="code-block">
                    // Example: Addition Button Handler
                    private void jButton13ActionPerformed(java.awt.event.ActionEvent evt) {
                    if (!jTextField1.getText().isEmpty()) {
                    expression.append(jTextField1.getText()).append(" + ");
                    jLabel2.setText(expression.toString());
                    jTextField1.setText("");
                    isNewNumber = true;
                    }
                    }
                </div>

                <h3>3. Number Button Handlers</h3>
                <p>Updated all number buttons (0-9) to work with the new expression system:</p>

                <div class="code-block">
                    // Example: Number 1 Button Handler
                    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
                    if (isNewNumber) {
                    jTextField1.setText("1");
                    isNewNumber = false;
                    } else {
                    jTextField1.setText(jTextField1.getText() + "1");
                    }
                    }
                </div>

                <h3>4. Equals Button Enhancement</h3>
                <div class="before-after">
                    <div class="before">
                        <h4>‚ùå Original Equals Handler</h4>
                        <div class="code-block">
                            double secondOperand = Double.parseDouble(jTextField1.getText());
                            switch (operator) {
                            case "+" -> result = firstOperand + secondOperand;
                            case "-" -> result = firstOperand - secondOperand;
                            case "*" -> result = firstOperand * secondOperand;
                            case "/" -> result = firstOperand / secondOperand;
                            default -> result = secondOperand;
                            }
                        </div>
                    </div>
                    <div class="after">
                        <h4>‚úÖ Enhanced Equals Handler</h4>
                        <div class="code-block">
                            try {
                            if (!jTextField1.getText().isEmpty()) {
                            expression.append(jTextField1.getText());
                            }

                            String expressionStr = expression.toString();
                            result = evaluateExpression(expressionStr);

                            jTextField1.setText(String.valueOf(result));
                            jLabel2.setText(expressionStr + " = " + result);

                            expression.setLength(0);
                            isNewNumber = true;
                            } catch (Exception e) {
                            jTextField1.setText("Error");
                            jLabel2.setText("Invalid expression");
                            expression.setLength(0);
                            isNewNumber = true;
                            }
                        </div>
                    </div>
                </div>

                <h3>5. Clear Button Updates</h3>
                <div class="code-block">
                    private void jButton18ActionPerformed(java.awt.event.ActionEvent evt) {
                    jTextField1.setText("");
                    expression.setLength(0);
                    jLabel2.setText("");
                    isNewNumber = true;
                    }
                </div>
            </div>

            <div class="section" id="algorithms">
                <h2>üßÆ Algorithms Implemented</h2>

                <h3>1. Shunting Yard Algorithm</h3>
                <div class="algorithm-box">
                    <h4>Purpose:</h4>
                    <p>Converts infix notation (normal math) to postfix notation (Reverse Polish Notation) while
                        respecting operator precedence.</p>

                    <h4>How it works:</h4>
                    <ol>
                        <li>Read tokens from left to right</li>
                        <li>If token is a number, add to output</li>
                        <li>If token is an operator:
                            <ul>
                                <li>While there's an operator on the stack with higher or equal precedence</li>
                                <li>Pop it to the output</li>
                                <li>Push current operator to stack</li>
                            </ul>
                        </li>
                        <li>At the end, pop all remaining operators</li>
                    </ol>
                </div>

                <div class="code-block">
                    private java.util.List&lt;String&gt; infixToPostfix(String expression) {
                    java.util.List&lt;String&gt; output = new java.util.ArrayList&lt;&gt;();
                    java.util.Stack&lt;String&gt; operators = new java.util.Stack&lt;&gt;();

                    int i = 0;
                    while (i &lt; expression.length()) {
                    char c = expression.charAt(i);

                    if (Character.isDigit(c) || c == '.') {
                    // Read complete number
                    StringBuilder num = new StringBuilder();
                    while (i &lt; expression.length() &amp;&amp;
                    (Character.isDigit(expression.charAt(i)) ||
                    expression.charAt(i) == '.')) {
                    num.append(expression.charAt(i));
                    i++;
                    }
                    output.add(num.toString());
                    } else if (c == '+' || c == '-' || c == '*' || c == '/') {
                    // Handle operator precedence
                    while (!operators.isEmpty() &amp;&amp;
                    getPrecedence(operators.peek()) &gt;= getPrecedence(String.valueOf(c))) {
                    output.add(operators.pop());
                    }
                    operators.push(String.valueOf(c));
                    i++;
                    } else {
                    i++; // Skip unknown characters
                    }
                    }

                    // Pop remaining operators
                    while (!operators.isEmpty()) {
                    output.add(operators.pop());
                    }

                    return output;
                    }
                </div>

                <h3>2. Postfix Evaluation Algorithm</h3>
                <div class="algorithm-box">
                    <h4>Purpose:</h4>
                    <p>Evaluates postfix expressions using a stack-based approach.</p>

                    <h4>How it works:</h4>
                    <ol>
                        <li>Read tokens from left to right</li>
                        <li>If token is a number, push to stack</li>
                        <li>If token is an operator:
                            <ul>
                                <li>Pop two numbers from stack</li>
                                <li>Apply operation (second popped number, first popped number)</li>
                                <li>Push result back to stack</li>
                            </ul>
                        </li>
                        <li>Final result is the only number left in stack</li>
                    </ol>
                </div>

                <div class="code-block">
                    private double evaluatePostfix(java.util.List&lt;String&gt; postfix) {
                    java.util.Stack&lt;Double&gt; stack = new java.util.Stack&lt;&gt;();

                    for (String token : postfix) {
                    if (isNumber(token)) {
                    stack.push(Double.parseDouble(token));
                    } else {
                    if (stack.size() &lt; 2) {
                    throw new IllegalArgumentException("Invalid expression");
                    }

                    double b = stack.pop();
                    double a = stack.pop();

                    switch (token) {
                    case "+" -&gt; stack.push(a + b);
                    case "-" -&gt; stack.push(a - b);
                    case "*" -&gt; stack.push(a * b);
                    case "/" -&gt; {
                    if (b == 0) {
                    throw new ArithmeticException("Division by zero");
                    }
                    stack.push(a / b);
                    }
                    default -&gt; throw new IllegalArgumentException("Unknown operator: " + token);
                    }
                    }
                    }

                    if (stack.size() != 1) {
                    throw new IllegalArgumentException("Invalid expression");
                    }

                    return stack.pop();
                    }
                </div>

                <h3>3. Precedence Rules</h3>
                <div class="code-block">
                    private int getPrecedence(String operator) {
                    return switch (operator) {
                    case "+", "-" -&gt; 1; // Lower precedence
                    case "*", "/" -&gt; 2; // Higher precedence
                    default -&gt; 0;
                    };
                    }
                </div>
            </div>

            <div class="section" id="examples">
                <h2>üìù Usage Examples</h2>

                <h3>Example 1: Basic Multiplication Precedence</h3>
                <div class="example">
                    <h4>Expression: 5 + 3 √ó 2</h4>
                    <p><strong>Step-by-step process:</strong></p>
                    <ol>
                        <li>User presses: 5 ‚Üí Display: "5"</li>
                        <li>User presses: + ‚Üí Display: "5 + " (expression shows in top label)</li>
                        <li>User presses: 3 ‚Üí Display: "3"</li>
                        <li>User presses: √ó ‚Üí Display: "3 √ó " (expression: "5 + 3 √ó ")</li>
                        <li>User presses: 2 ‚Üí Display: "2"</li>
                        <li>User presses: = ‚Üí Display: "11" (result)</li>
                    </ol>
                    <p><strong>Calculation:</strong> 5 + (3 √ó 2) = 5 + 6 = 11 ‚úÖ</p>
                </div>

                <h3>Example 2: Complex Expression</h3>
                <div class="example">
                    <h4>Expression: 10 - 2 √ó 3 + 1</h4>
                    <p><strong>Step-by-step process:</strong></p>
                    <ol>
                        <li>User presses: 1, 0 ‚Üí Display: "10"</li>
                        <li>User presses: - ‚Üí Display: "10 - " (expression shows)</li>
                        <li>User presses: 2 ‚Üí Display: "2"</li>
                        <li>User presses: √ó ‚Üí Display: "2 √ó " (expression: "10 - 2 √ó ")</li>
                        <li>User presses: 3 ‚Üí Display: "3"</li>
                        <li>User presses: + ‚Üí Display: "3 + " (expression: "10 - 2 √ó 3 + ")</li>
                        <li>User presses: 1 ‚Üí Display: "1"</li>
                        <li>User presses: = ‚Üí Display: "5" (result)</li>
                    </ol>
                    <p><strong>Calculation:</strong> 10 - (2 √ó 3) + 1 = 10 - 6 + 1 = 5 ‚úÖ</p>
                </div>

                <h3>Example 3: Division Precedence</h3>
                <div class="example">
                    <h4>Expression: 8 √∑ 2 + 3</h4>
                    <p><strong>Calculation:</strong> (8 √∑ 2) + 3 = 4 + 3 = 7 ‚úÖ</p>
                    <p><strong>Note:</strong> Division and multiplication have equal precedence, so they're evaluated
                        left-to-right.</p>
                </div>
            </div>

            <div class="section" id="technical">
                <h2>‚öôÔ∏è Technical Implementation Details</h2>

                <h3>Data Structures Used</h3>
                <ul>
                    <li><strong>StringBuilder:</strong> Efficiently builds expressions character by character</li>
                    <li><strong>Stack&lt;String&gt;:</strong> Manages operator precedence in Shunting Yard algorithm
                    </li>
                    <li><strong>Stack&lt;Double&gt;:</strong> Evaluates postfix expressions</li>
                    <li><strong>List&lt;String&gt;:</strong> Stores postfix notation tokens</li>
                </ul>

                <h3>Error Handling</h3>
                <div class="code-block">
                    try {
                    // Expression evaluation
                    result = evaluateExpression(expressionStr);
                    jTextField1.setText(String.valueOf(result));
                    jLabel2.setText(expressionStr + " = " + result);
                    } catch (Exception e) {
                    jTextField1.setText("Error");
                    jLabel2.setText("Invalid expression");
                    expression.setLength(0);
                    isNewNumber = true;
                    }
                </div>

                <h3>State Management</h3>
                <p>The calculator maintains several states:</p>
                <ul>
                    <li><strong>isNewNumber:</strong> Tracks whether the next digit should start a new number</li>
                    <li><strong>expression:</strong> Stores the complete mathematical expression</li>
                    <li><strong>result:</strong> Stores the last calculated result</li>
                </ul>

                <h3>UI Updates</h3>
                <ul>
                    <li><strong>jTextField1:</strong> Main display for current number/result</li>
                    <li><strong>jLabel2:</strong> Shows the complete expression being built</li>
                    <li><strong>Real-time feedback:</strong> Users can see their expression as they build it</li>
                </ul>
            </div>

            <div class="section" id="testing">
                <h2>üß™ Testing & Validation</h2>

                <h3>Test Cases</h3>
                <div class="example">
                    <h4>Precedence Tests</h4>
                    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                        <tr style="background: #f8f9fa;">
                            <th style="border: 1px solid #ddd; padding: 10px;">Expression</th>
                            <th style="border: 1px solid #ddd; padding: 10px;">Expected Result</th>
                            <th style="border: 1px solid #ddd; padding: 10px;">Status</th>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 10px;">5 + 3 √ó 2</td>
                            <td style="border: 1px solid #ddd; padding: 10px;">11</td>
                            <td style="border: 1px solid #ddd; padding: 10px; color: green;">‚úÖ Pass</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 10px;">10 - 2 √ó 3</td>
                            <td style="border: 1px solid #ddd; padding: 10px;">4</td>
                            <td style="border: 1px solid #ddd; padding: 10px; color: green;">‚úÖ Pass</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 10px;">8 √∑ 2 + 3</td>
                            <td style="border: 1px solid #ddd; padding: 10px;">7</td>
                            <td style="border: 1px solid #ddd; padding: 10px; color: green;">‚úÖ Pass</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 10px;">2 + 3 √ó 4 - 1</td>
                            <td style="border: 1px solid #ddd; padding: 10px;">13</td>
                            <td style="border: 1px solid #ddd; padding: 10px; color: green;">‚úÖ Pass</td>
                        </tr>
                    </table>
                </div>

                <h3>Error Handling Tests</h3>
                <ul>
                    <li><strong>Division by zero:</strong> Properly catches and displays error</li>
                    <li><strong>Invalid expressions:</strong> Graceful error handling</li>
                    <li><strong>Empty expressions:</strong> Prevents crashes</li>
                </ul>

                <h3>Compilation & Execution</h3>
                <div class="code-block">
                    # Compilation
                    javac -d build/classes src/AppletCalculator.java

                    # Execution
                    java -cp build/classes AppletCalculator
                </div>
            </div>

            <div class="section">
                <h2>üéâ Summary</h2>
                <p>The calculator has been successfully transformed from a basic single-operation tool into a
                    sophisticated multi-operation calculator that:</p>
                <ul>
                    <li>‚úÖ Supports complex mathematical expressions</li>
                    <li>‚úÖ Respects proper mathematical precedence (PEMDAS/BODMAS)</li>
                    <li>‚úÖ Provides real-time expression display</li>
                    <li>‚úÖ Includes comprehensive error handling</li>
                    <li>‚úÖ Uses industry-standard algorithms (Shunting Yard)</li>
                    <li>‚úÖ Maintains clean, maintainable code structure</li>
                </ul>

                <div class="highlight">
                    <strong>Key Achievement:</strong> The calculator now correctly evaluates expressions like
                    <code>5 + 3 √ó 2 - 1</code> as <code>10</code> instead of the incorrect <code>19</code>,
                    demonstrating proper implementation of mathematical precedence rules.
                </div>
            </div>
        </div>

        <div class="footer">
            <p>üìÖ Documentation created: <span id="date"></span></p>
            <p>üîß Enhanced Calculator - Java Application 12</p>
        </div>
    </div>

    <script>
        document.getElementById('date').textContent = new Date().toLocaleDateString();
    </script>
</body>

</html>